<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leasing</title>
    <link rel="stylesheet" href="https://unpkg.com/normalize.css/normalize.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Leasing – o alternativă benefică a surselor de finanțare ale firmei?</h1>
    <img id="diagrama1" src="images/diagrama1.png" alt="diagrama1">
    <table>
        <tr>
        <th>Financiar</th>
        <th>Operational</th>
        </tr>

        <tr>
            <td>Utilizatorul trateaza bunul de parca ar fi al lui (contabilitate, reparatii).</td>
            <td>Bunul e pentru folosinta temporara, se returneaza.</td>
        </tr>
        <tr>
            <td>Utilizatorul de obicei cumpara bunul la final platind valoarea reziduala.</td>
            <td>Intretinearea poate fi inclusa in contract</td>
        </tr>
        <tr>
            <td>Potrivit pentru investiții pe termen lung</td>
            <td>Potrivit pentru flexibilitate și risc minim.</td>
        </tr>
    </table>

    <div id="main">
      <p>Rata lunara totala financiar: dobanda calculata din (pret - val reziduala), + servicii<br>
        Rata lunara totala operational: tarif + servicii</p>
    <form id="leasingForm">
      <fieldset>
        <legend>Input</legend>
    
        <label>
          Preț bun (lei)
          <input type="number" id="price" min="1000" step="100" value="50000">
        </label>
    
        <label>
          Tip leasing
          <select id="type" onchange="toggleFields()">
            <option value="financiar">Financiar</option>
            <option value="operational">Operațional</option>
          </select>
        </label>
    
        <label>
          Durată (luni)
          <input type="number" id="months" min="12" max="84" value="36">
        </label>
    
        <!-- FINANCIAR -->
        <label>
          Dobândă anuală (%) – financiar
          <input type="number" id="interest" min="1" max="25" step="0.1" value="8">
        </label>
    
        <label>
          Valoare reziduală (lei) – financiar
          <input type="text" id="residual" min="0" step="100" value="5000">
        </label>
    
        <label>
          Cost lunar întreținere & reparații (lei) – financiar
          <input type="text" id="maintenance" min="0" step="50" value="300">
        </label>
    
        <!-- OPERAȚIONAL -->
        <label>
          Tarif lunar leasing operațional (lei)
          <input type="text" id="operationalRate" min="500" step="50" value="1200">
        </label>
    
        <label>
          Cost lunar servicii incluse (lei)
          <input type="text" id="services" min="0" step="50" value="400">
        </label>
    
        <button type="button" onclick="calc()">Calculează</button>
      </fieldset>
    
      <fieldset>
        <legend>Output</legend>
    
        <label>Rată lunară totală:
          <output id="monthly"></output>
        </label>
    
        <label>Cost total leasing:
          <output id="total"></output>
        </label>
    
        <label>Cost total reparații:
          <output id="repairs"></output>
        </label>
    
        <label>Cine suportă riscurile:
          <output id="risk"></output>
        </label>
      </fieldset>
    </form>

    <section id="obiecte"></section>
</div>

<script>
const priceEl = document.getElementById("price");
const monthsEl = document.getElementById("months");
const interestEl = document.getElementById("interest");
const residualEl = document.getElementById("residual");
const maintenanceEl = document.getElementById("maintenance");
const operationalRateEl = document.getElementById("operationalRate");
const servicesEl = document.getElementById("services");
const typeEl = document.getElementById("type");

const monthlyOut = document.getElementById("monthly");
const totalOut = document.getElementById("total");
const repairsOut = document.getElementById("repairs");
const riskOut = document.getElementById("risk");

priceEl.addEventListener("input", estimateFromPrice);

function estimateFromPrice() {
  const price = Number(priceEl.value);
  const months = Number(monthsEl.value);

  if (!price || months < 12) return;

  // ===== FINANCIAR =====
  if (typeEl.value === "financiar") {

    // valoare reziduală ~20% din preț
    const residual = price * 0.20;

    // mentenanță ~5% pe an → lunar
    const maintenance = (price * 0.05) / 12;

    residualEl.value = residual.toFixed(10);
    maintenanceEl.value = maintenance.toFixed(10);
  }

  // ===== OPERAȚIONAL =====
  if (typeEl.value === "operational") {

    // depreciere ~75%
    const depreciation = (price * 0.75) / months;

    // risc + profit ~3% / an
    const riskProfit = (price * 0.03) / 12;

    const operationalRate = depreciation + riskProfit;

    // servicii incluse ~4% / an
    const services = (price * 0.04) / 12;

    operationalRateEl.value = operationalRate.toFixed(10);
    servicesEl.value = services.toFixed(10);
  }

}


function toggleFields() {
  const f = typeEl.value === "financiar";

  interestEl.disabled = !f;
  residualEl.disabled = !f;
  maintenanceEl.disabled = !f;

  operationalRateEl.disabled = f;
  servicesEl.disabled = f;
  estimateFromPrice();
}

toggleFields();

function calc() {
  const price = +priceEl.value;
  const months = +monthsEl.value;

  if (months < 12) {
    alert("Durata minimă este 12 luni.");
    return;
  }

  let monthly = 0;
  let total = 0;
  let repairs = 0;
  let risk = "";

  if (typeEl.value === "financiar") {
    const interest = +interestEl.value / 100 / 12;
    const residual = parseFloat(residualEl.value);
    const maintenance = parseFloat(maintenanceEl.value);

    if (residual >= price) {
      alert("Valoarea reziduală trebuie să fie mai mică decât prețul bunului.");
      return;
    }

    const financed = price - residual;
    monthly = (financed * interest) / (1 - Math.pow(1 + interest, -months));
    repairs = maintenance * months;
    total = monthly * months + residual + repairs;

    risk = "Utilizatorul";
  } 
  else {
    const opRate = parseFloat(operationalRateEl.value);
    const services = +servicesEl.value;

    monthly = opRate + services;
    repairs = 0;
    total = monthly * months;

    risk = "Firma de leasing";
  }

  monthlyOut.textContent = monthly.toFixed(10) + " lei";
  totalOut.textContent = total.toFixed(10) + " lei";
  repairsOut.textContent = repairs.toFixed(10) + " lei";
  riskOut.textContent = risk;
}


</script>

<script>
  
  const obiecteLeasing = [
    {
      nume: "Mașină",
      pret: 150000,          // ~30.000 EUR
      imagine: "masina.webp"
    },
    {
      nume: "Casă",
      pret: 750000,          // ~150.000 EUR
      imagine: "casa.jpg"
    },
    {
      nume: "Spațiu comercial",
      pret: 2000000,         // ~400.000 EUR
      imagine: "spatiu_comercial.jpg"
    },
    {
      nume: "Yacht",
      pret: 12500000,        // ~2.500.000 EUR
      imagine: "yacht.jpg"
    },

    // obiecte speciale / amuzante
    {
      nume: "Furnică (transport logistic)",
      pret: 0.06,            // estimare din colonii reale
      imagine: "furnica.jpg"
    },
    {
      nume: "Pix",
      pret: 8,               // pix decent
      imagine: "pix.jpg"
    },
    {
      nume: "Planeta Jupiter",
      pret: 1000000000000000000000000000000,
      imagine: "jupiter.jpg"
    }
  ];


const container = document.getElementById("obiecte");

obiecteLeasing.forEach(obj => {
  const card = document.createElement("div");
  card.className = "obiect";

  card.innerHTML = `
    <img src="images/${obj.imagine}" alt="${obj.nume}">
    <div>
        <h3>${obj.nume}</h3>
        <p>Preț estimat: ${obj.pret.toLocaleString("ro-RO")} lei</p>
    </div>
  `;

  card.addEventListener("click", () => {
    priceEl.value = obj.pret;

    priceEl.dispatchEvent(new Event("input"));
    calc()
  });
  container.appendChild(card);

});

</script>

</body>
</html>
